<div class="container mt-4">
  <h2 class="text-center">{{ titulo }}</h2>

  <!--  Select para elegir la ubicaci贸n -->
  <div class="mb-3">
    <label for="ubicacionSelect" class="form-label">Selecciona una ubicaci贸n:</label>
    <select 
      id="ubicacionSelect" 
      class="form-control" 
      [(ngModel)]="idSeleccionado" 
      (change)="onUbicacionSeleccionada()">
      <option [ngValue]="-1" disabled>Selecciona una ubicaci贸n</option>
      <option *ngFor="let ubi of ubis" [value]="ubi.id">
        {{ ubi.nombre }}
      </option>
    </select>
  </div>

  <!--  Tabla de materiales (Solo se muestra si hay elementos en listadoact) -->
  <div *ngIf="listadoact.length > 0">
    <h4 class="mt-3">Materiales en esta ubicaci贸n</h4>
    <table class="table table-striped table-bordered">
      <thead class="table-dark">
        <tr>
          <th>Tipo</th>
          <th>Nombre</th>
          <th>Ubicaci贸n Actual</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let mat of listadoact">
          <td>{{ mat.tipo }}</td>
          <td>{{ mat.nombre }}</td>
          <td>{{ mat.nombreUbicacion }}</td>
        </tr>
      </tbody>
    </table>

    <!--  Bot贸n para modificar la ubicaci贸n -->
    <button class="btn btn-primary mt-3" (click)="mostrarFormulario = !mostrarFormulario">
      Modificar Ubicaci贸n
    </button>
  </div>

  <!--  Formulario para cambiar ubicaci贸n (Solo aparece si mostrarFormulario es true) -->
  <div *ngIf="mostrarFormulario" class="mt-3">
    <form #NOUbis="ngForm" (ngSubmit)="modificarUbicacion()" class="card p-3">
      <h5 class="text-center">Cambiar Ubicaci贸n</h5>

      <div class="mb-3">
        <label class="form-label">Ubicaci贸n Nueva:</label>
        <select 
          class="form-control" 
          [(ngModel)]="noubisact.idUbicacionNueva" 
          name="idUbicacionNueva" required>
          <option value="" disabled>Seleccione una nueva ubicaci贸n</option>
          <option *ngFor="let ubi of ubis" [value]="ubi.id">
            {{ ubi.nombre }}
          </option>
        </select>
      </div>

      <div class="text-center">
        <button type="submit" class="btn btn-success me-2">Guardar</button>
        <button type="button" class="btn btn-danger" (click)="mostrarFormulario = false">Cancelar</button>
      </div>
    </form>
  </div>
</div>
